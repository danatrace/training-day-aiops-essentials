{"id":"bebde7ca-881c-4c7c-ba90-b814c9b9f3a0","title":"Delete-all-training-user-content","isDeployed":true,"taskDefaults":{},"lastExecution":null,"description":"","actor":"bc935a57-c7d3-440e-922c-79a22bf7afd6","owner":"bc935a57-c7d3-440e-922c-79a22bf7afd6","ownerType":"USER","isPrivate":true,"triggerType":"Manual","schemaVersion":3,"trigger":{},"modificationInfo":{"createdBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","createdTime":"2026-01-15T04:09:32.556Z","lastModifiedBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","lastModifiedTime":"2026-01-15T04:09:32.556Z"},"result":null,"type":"STANDARD","input":{"users":["daniel.braaf@dynatrace.com"]},"hourlyExecutionLimit":1000,"throttle":{"isLimitHit":false,"limitEvents":[]},"workflowLimit":{"isActive":false},"version":1,"unacknowledgedSkippedScheduleAt":null,"tasks":{"delete-tags":{"name":"delete-tags","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\nimport { settingsObjectsClient } from \"@dynatrace-sdk/client-classic-environment-v2\";\n\n\nexport default async function () {\n  // your code goes here\n  // e.g. get the current execution\n  const data =   await settingsObjectsClient.getSettingsObjects({\n        scopes: \"environment\",\n        schemaIds: \"builtin:tags.auto-tagging\", \n        adminAccess: true,\n        filter: \"(value.name contains 'perform')\"\n\n  });\n\n  for (let a_detection of data.items) {\n   console.log(a_detection.objectId)\n   const datax =\n     await settingsObjectsClient.deleteSettingsObjectByObjectId(\n       { objectId: a_detection.objectId},\n   );\n  }\n  \n  return data;\n}"},"action":"dynatrace.automations:run-javascript","active":true,"position":{"x":0,"y":3},"conditions":{"states":{"delete-anomaly-det":"OK"}},"description":"Run custom JavaScript code.","predecessors":["delete-anomaly-det"]},"delete_notebooks":{"name":"delete_notebooks","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\nimport { documentsClient } from \"@dynatrace-sdk/client-document\";\n\n\n\nexport default async function () {\n  // your code goes here\n  // e.g. get the current execution\n  const data = await documentsClient.listDocuments({\n    adminAccess: true,\n    type: \"notebook\",\n    filter: \"(name contains 'Perform Workflow')\"\n    \n  });\n\n  for (let dashboard of data.documents) {\n    //console.log(dashboard)\n    console.log(dashboard.id)\n    console.log(dashboard.version)\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    const datax = await documentsClient.deleteDocument({\n      adminAccess: true,\n      id: dashboard.id,\n      optimisticLockingVersion: dashboard.version,\n    });\n    \n  }\n\n  return data ;\n}"},"action":"dynatrace.automations:run-javascript","position":{"x":0,"y":4},"conditions":{"states":{"delete-tags":"OK"}},"description":"Run custom JavaScript code.","predecessors":["delete-tags"]},"delete-dashboards":{"name":"delete-dashboards","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\nimport { documentsClient } from \"@dynatrace-sdk/client-document\";\n\n\n\nexport default async function () {\n  // your code goes here\n  // e.g. get the current execution\n  const data = await documentsClient.listDocuments({\n    adminAccess: true,\n    type: \"dashboard\",\n    filter: \"(name contains 'Perform AWS Automation')\"\n    \n  });\n\n  for (let dashboard of data.documents) {\n    //console.log(dashboard)\n    console.log(dashboard.id)\n    console.log(dashboard.version)\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    const datax = await documentsClient.deleteDocument({\n      adminAccess: true,\n      id: dashboard.id,\n      optimisticLockingVersion: dashboard.version,\n    });\n    \n  }\n\n  return data ;\n}"},"action":"dynatrace.automations:run-javascript","active":true,"position":{"x":0,"y":1},"description":"Run custom JavaScript code.","predecessors":[]},"delete-anomaly-det":{"name":"delete-anomaly-det","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\nimport { settingsObjectsClient } from \"@dynatrace-sdk/client-classic-environment-v2\";\n\n\nexport default async function () {\n  // your code goes here\n  // e.g. get the current execution\n  const data =   await settingsObjectsClient.getSettingsObjects({\n        scopes: \"environment\",\n        schemaIds: \"builtin:davis.anomaly-detectors\", \n        adminAccess: true,\n        filter: \"(value.title contains 'perform')\"\n\n  });\n\n  for (let a_detection of data.items) {\n   console.log(a_detection.objectId)\n   const datax =\n     await settingsObjectsClient.deleteSettingsObjectByObjectId(\n       { objectId: a_detection.objectId},\n   );\n  }\n  \n  return data;\n}"},"action":"dynatrace.automations:run-javascript","active":true,"position":{"x":0,"y":2},"conditions":{"states":{"delete-dashboards":"OK"}},"description":"Run custom JavaScript code.","predecessors":["delete-dashboards"]},"delete-cloudformation-stacks":{"name":"delete-cloudformation-stacks","input":{"workflowId":"d383240e-af68-4833-bd4b-d02615b1030d","workflowInput":"{\n  \"awsregion\": \"us-east-1\",\n  \"cf_stackname\": \"dynatrace-chaos-testing-instance-and-ssm-document-{{_.item.key }}\",\n  \"dynatraceawsconnection\": \"554872066791\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":-1,"y":1},"withItems":"item in [{% for my_item in input()[\"users\"]  %} { \"email\" : \"{{ my_item }}\",\"key\": \"perform{{loop.index}}\"}    {% if not loop.last %}, {% endif %}{% endfor %}]","concurrency":1,"description":"Modularize your workflows, run any existing workflow.","predecessors":[]}}}