{"id":"5052e41e-caa3-4bc8-a818-5f7b3999dbdb","title":"subworkflow - aws extend ebs volume","isDeployed":true,"taskDefaults":{},"lastExecution":null,"description":"Subworkflow to extend aws volumes (can only be done once every 6 hours).\n\nThis subworkflow provides an easy way to trigger\nthe extension of aws volumes attached to an ec2 instance\n\nParameters:\n\nosType: (Required) the Operating System type of the Ec2 istance (Windows or Linux)\nSizeGib: (Required) The target size to increase the volume to (in GiB).\nVolumeId: (Required) The volume to be extended\nawsregion: region of volume to extend\nInstanceId: (Required) The identifier of the instance requiring increase of volume\nMountPoint: (Optional) The mount point (such as \"/\", \"/data\", ...) of the partition which is to be increased(Required for Linux).\nDriveLetter: (Optional) The drive letter which is to be increased(Required for windows).\nkeepSnapShot: (Optional) A boolean flag to determine whether to remove the created snapshot after successful resizing of the volume and the file system(True by default).\ndynatraceawsconnection: (Required) dynatrace aws oidc connection\nAutomationAssumeRolearn: (Optional) The ARN of the role that allows Automation to perform the actions on your behalf\n\n\nThis subworkflow only works on ssm managed aws ec2 instances:\nPlease view this aws manual on how to make an ec2 instances ssm managed: https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-setting-up-ec2.html\n\nThis subworkflow needs 2 SSM Documents:\n\n1.) Out of the Box AWS Document \"aws-extendebsvolume\" https://docs.aws.amazon.com/systems-manager-automation-runbooks/latest/userguide/aws-extendebsvolume.html\n2.) A Custom Document for which you will find the instructions to import below\n\nThe Out of the Box Document \"aws-extendebsvolume\" provides the following functionality:\n .) create snapshot (Optional)\n .) Resize Ebs Volume on AWS\n .) Resize partitions on Operating systems","actor":"bc935a57-c7d3-440e-922c-79a22bf7afd6","owner":"bc935a57-c7d3-440e-922c-79a22bf7afd6","ownerType":"USER","isPrivate":false,"triggerType":"Manual","schemaVersion":3,"trigger":{},"modificationInfo":{"createdBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","createdTime":"2026-01-15T04:09:48.617Z","lastModifiedBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","lastModifiedTime":"2026-01-15T04:09:48.617Z"},"result":"{{ result(\"wait-for-ssm-execution-completed\") }}","type":"STANDARD","input":{"osType":"","SizeGib":"90","VolumeId":"vol-034b884f20b26576c","awsregion":"us-east-1","InstanceId":"i-04ea0bc508917a220","MountPoint":"/","DriveLetter":"","keepSnapShot":"false","dynatraceawsconnection":"awssandbox","AutomationAssumeRolearn":""},"hourlyExecutionLimit":1000,"throttle":{"isLimitHit":false,"limitEvents":[]},"workflowLimit":{"isActive":false},"version":1,"unacknowledgedSkippedScheduleAt":null,"tasks":{"check-status":{"name":"check-status","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\n\nexport default async function ({ execution_id }) {\n  const configGet = await fetch(`/platform/automation/v1/executions/${execution_id}/tasks/wait-for-ssm-execution-completed/result`);\n  const configBody = await configGet.json();\n  const status = configBody.AutomationExecutionStatus.toUpperCase()\n  console.log(status)\n  \n  if (status !=\"SUCCESS\") {\n        console.log(\"SSM Document Execution has Failed!\");\n        throw new Error(\"SSM Document Execution has Failed!\");\n  } \n\n  return configBody;\n}"},"action":"dynatrace.automations:run-javascript","active":true,"position":{"x":0,"y":3},"conditions":{"states":{"wait-for-ssm-execution-completed":"OK"}},"description":"Run custom JavaScript code.","predecessors":["wait-for-ssm-execution-completed"]},"wait-for-ssm-execution-completed":{"name":"wait-for-ssm-execution-completed","input":{"workflowId":"20661ec0-29d5-471f-9973-29679d5fe908","workflowInput":"{\n\"AutomationExecutionId\":\"{{result(\"systems_manager_start_automation_execution_1\").AutomationExecutionId }}\",\n\"awsregion\": \"{{input()[\"awsregion\"] }}\",\n\"dynatraceawsconnection\": \"{{ input()[\"dynatraceawsconnection\"] }}\"\n}"},"retry":{"count":99,"delay":60,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"timeout":604800,"position":{"x":0,"y":2},"conditions":{"states":{"systems_manager_start_automation_execution_1":"OK"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["systems_manager_start_automation_execution_1"]},"systems_manager_start_automation_execution_1":{"name":"systems_manager_start_automation_execution_1","input":{"region":"{{ input()[\"awsregion\"]}}","Parameters":"{\n  \"VolumeId\": [\"{{ input()[\"VolumeId\"] }}\"],\n  \"SizeGib\": [\"{{ input()[\"SizeGib\"] }}\"],\n  \"MountPoint\": [\"{{ input()[\"MountPoint\"] }}\"],\n  \"DriveLetter\": [\"{{ input()[\"DriveLetter\"] }}\"],\n  \"keepSnapShot\": [\"{{ input()[\"keepSnapShot\"] }}\"], \n  \"InstanceId\": [\"{{ input()[\"InstanceId\"] }}\"],\n  \"AutomationAssumeRole\": [\"{{ input()[\"AutomationAssumeRolearn\"] }}\"]\n}","connection":"{% set awsconnection = input()[\"dynatraceawsconnection\"] %}\n{{ connection('builtin:hyperscaler-authentication.connections.aws', awsconnection) }}","DocumentName":"AWS-ExtendEbsVolume"},"action":"dynatrace.aws.connector:ssm-start-automation-execution","active":true,"timeout":604800,"position":{"x":0,"y":1},"description":"Initiates execution of an Automation runbook","predecessors":[]}}}