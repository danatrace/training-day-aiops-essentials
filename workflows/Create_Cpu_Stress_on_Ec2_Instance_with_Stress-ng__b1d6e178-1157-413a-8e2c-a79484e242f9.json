{"id":"b1d6e178-1157-413a-8e2c-a79484e242f9","title":"Create Cpu Stress on Ec2 Instance with Stress-ng","isDeployed":true,"taskDefaults":{},"lastExecution":null,"description":"","actor":"bc935a57-c7d3-440e-922c-79a22bf7afd6","owner":"bc935a57-c7d3-440e-922c-79a22bf7afd6","ownerType":"USER","isPrivate":true,"triggerType":"Schedule","schemaVersion":3,"trigger":{"schedule":{"isActive":false,"isFaulty":false,"trigger":{"type":"interval","intervalMinutes":90},"rule":null,"filterParameters":{"earliestStart":"2025-08-28","earliestStartTime":"09:15"},"timezone":"America/Los_Angeles","inputs":{},"nextExecution":null}},"modificationInfo":{"createdBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","createdTime":"2026-01-15T04:09:29.555Z","lastModifiedBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","lastModifiedTime":"2026-01-15T04:09:29.555Z"},"result":null,"type":"STANDARD","input":{"awsregion":"us-east-1","problemtag":"cpu_daniel.braaf@dynatrace.com","dynatraceawsconnection":"554872066791"},"hourlyExecutionLimit":1000,"throttle":{"isLimitHit":false,"limitEvents":[]},"workflowLimit":{"isActive":false},"version":1,"unacknowledgedSkippedScheduleAt":null,"tasks":{"run-stress-ng":{"name":"run-stress-ng","input":{"workflowId":"57fa7bc0-b0ee-406d-b231-b16fe35e4c79","workflowInput":"{\n  \"commands\": [\n    \"sudo apt-get update -y\",\n    \"sudo apt install stress-ng -y\",\n    \"sudo stress-ng --cpu 2 -t 1000s &\"\n  ],\n  \"awsregion\": \"{{ input()[\"awsregion\"] }}\",\n  \"instanceid\": \"{{ _.item.ResourceId }}\",\n  \"executionTimeout\": \"5400\",\n  \"workingDirectory\": \"/home/ubuntu\",\n  \"dynatraceawsconnection\": \"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","position":{"x":0,"y":2},"conditions":{"states":{"get-instances-by-tag":"OK"}},"withItems":"item in {{ result(\"get-instances-by-tag\").Tags }}","concurrency":30,"description":"Modularize your workflows, run any existing workflow.","predecessors":["get-instances-by-tag"]},"get-instances-by-tag":{"name":"get-instances-by-tag","input":{"region":"{{ input()[\"awsregion\"] }}","Filters":[{"key":"resource-type","value":"instance"},{"key":"value","value":"{{ input()[\"problemtag\"] }}"},{"key":"key","value":"problem"}],"MaxResults":100,"connection":"{% set awsconnection = input()[\"dynatraceawsconnection\"] %}\n{{ connection('builtin:hyperscaler-authentication.connections.aws', awsconnection) }}"},"action":"dynatrace.aws.connector:ec2-describe-tags","position":{"x":0,"y":1},"description":"Describes the specified tags for your EC2 resources","predecessors":[]}}}