{"id":"cba39ee3-78da-4bb9-9caa-f42a3990cf3d","title":"template - dynatrace remediate aws ec2 instance process or memory saturation","isDeployed":true,"taskDefaults":{},"lastExecution":null,"description":"Remediate CPU Saturation by Process on host","actor":"bc935a57-c7d3-440e-922c-79a22bf7afd6","owner":"bc935a57-c7d3-440e-922c-79a22bf7afd6","ownerType":"USER","isPrivate":false,"triggerType":"Manual","schemaVersion":3,"trigger":{},"modificationInfo":{"createdBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","createdTime":"2026-01-15T04:09:59.502Z","lastModifiedBy":"bc935a57-c7d3-440e-922c-79a22bf7afd6","lastModifiedTime":"2026-01-15T04:09:59.502Z"},"result":null,"type":"STANDARD","input":{"event_id":"","display_id":"","event_name":"","instance_id":"","process_name":"","aws_region_name":"","ec2_instance_type":"","process_entity_id":"","process_host_name":"","dynatraceawsconnection":"","process_host_entity_id":""},"hourlyExecutionLimit":1000,"throttle":{"isLimitHit":false,"limitEvents":[]},"workflowLimit":{"isActive":false},"version":1,"unacknowledgedSkippedScheduleAt":null,"tasks":{"calculate-size":{"name":"calculate-size","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\n\nexport default async function ({ executionId }) {\n  // your code goes here\n  // e.g. get the current execution\n  const aws_instance_sizes = [\"small\",\"medium\",\"large\",\"xlarge\",\"2xlarge\", \"4xlarge\", \"8xlarge\"]\n  console.log(\"get AutomationExecutionId\")\n  const { input } = await fetch(`/platform/automation/v1/executions/${executionId}`).then((res) => res.json());\n  const instance_type_split: string[] = input.ec2_instance_type.split(\".\");\n  const current_instance_type = input.ec2_instance_type\n\n  const posof_c = aws_instance_sizes.indexOf(instance_type_split[1])\n  const calc = posof_c + 1\n  const resize_to = instance_type_split[0]+\".\"+aws_instance_sizes[calc] \n  console.log(\"Resize to \"+resize_to+\"\")\n\n  return { \"current_instancetype\": current_instance_type,\"future_instancetype\": resize_to }}"},"action":"dynatrace.automations:run-javascript","active":true,"position":{"x":0,"y":2},"conditions":{"else":"STOP","custom":"","states":{"check-for-recent-remediation":"OK"}},"description":"Run custom JavaScript code.","predecessors":["check-for-recent-remediation"]},"reboot-ec2-instance":{"name":"reboot-ec2-instance","input":{"workflowId":"b9de7879-6723-43a0-92ca-5bae8294da4b","workflowInput":"{\n \"awsRegion\": \"{{input()[\"aws_region_name\"] }}\",\n \"instanceIds\": \"{{input()[\"instance_id\"] }}\",\n \"dynatraceawsconnection\":\"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":-2,"y":5},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"check-if-problem-is-solved-1":"ERROR"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["check-if-problem-is-solved-1"]},"resize-ec2-instance":{"name":"resize-ec2-instance","input":{"workflowId":"e1ef703b-88ac-496a-a4a0-38805fe6e91c","workflowInput":"{\n\"awsregion\":\"{{input()[\"aws_region_name\"] }}\",\n\"instanceid\":\"{{input()[\"instance_id\"] }}\",\n\"resize_to_instance_type\":\"{{result(\"calculate-size\").future_instancetype }}\",\n\"dynatraceawsconnection\":\"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":-2,"y":7},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"check-if-problem-is-solved-2":"ERROR"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["check-if-problem-is-solved-2"]},"reboot-ec2-instance-2":{"name":"reboot-ec2-instance-2","input":{"workflowId":"b9de7879-6723-43a0-92ca-5bae8294da4b","workflowInput":"{\n \"awsRegion\": \"{{input()[\"aws_region_name\"] }}\",\n \"instanceIds\": \"{{input()[\"instance_id\"] }}\",\n \"dynatraceawsconnection\":\"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":0,"y":3},"conditions":{"else":"STOP","custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"calculate-size":"OK"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["calculate-size"]},"resize-ec2-instance-2":{"name":"resize-ec2-instance-2","input":{"workflowId":"e1ef703b-88ac-496a-a4a0-38805fe6e91c","workflowInput":"{\n\"awsregion\":\"{{input()[\"aws_region_name\"] }}\",\n\"instanceid\":\"{{input()[\"instance_id\"] }}\",\n\"resize_to_instance_type\":\"{{result(\"calculate-size\").future_instancetype }}\",\n\"dynatraceawsconnection\":\"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":0,"y":5},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"check-if-problem-is-solved-5":"ERROR"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["check-if-problem-is-solved-5"]},"resize-ec2-instance-3":{"name":"resize-ec2-instance-3","input":{"workflowId":"e1ef703b-88ac-496a-a4a0-38805fe6e91c","workflowInput":"{\n\"awsregion\":\"{{input()[\"aws_region_name\"] }}\",\n\"instanceid\":\"{{input()[\"instance_id\"] }}\",\n\"resize_to_instance_type\":\"{{result(\"calculate-size\").future_instancetype }}\",\n\"dynatraceawsconnection\":\"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":3,"y":3},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").resizeinstance == true }}","states":{"calculate-size":"SUCCESS"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["calculate-size"]},"send-escalation-email":{"name":"send-escalation-email","input":{"cc":[],"to":["daniel.braaf@dynatrace.com"],"bcc":[],"taskId":"{{ task().id }}","content":"Auto Remediation was not Successful\nDynatrace Remediation Workflow: {{ result(\"set-variables\").dynatrace_apps_tenant_url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\nProblem id: {{result(\"get-problem-info\").records[0]['display_id']}} {{ result(\"set-variables\").dynatrace_apps_tenant_url }}/ui/apps/dynatrace.classic.problems/problems/problemdetails;gtf=-6h;gf=all;pid={{result(\"get-problem-info\").records[0][\"event.id\"] }}\n","subject":"Auto Remediation was not Successful","executionId":"{{ execution().id }}","environmentUrl":"https://kyw96254.apps.dynatrace.com"},"action":"dynatrace.email:send-email","active":true,"position":{"x":-2,"y":9},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"check-if-problem-is-solved-4":"ERROR"}},"description":"Send email","predecessors":["check-if-problem-is-solved-4"]},"send-escalation-email-2":{"name":"send-escalation-email-2","input":{"cc":[],"to":["daniel.braaf@dynatrace.com"],"bcc":[],"taskId":"{{ task().id }}","content":"Auto Remediation was not Successful\nDynatrace Remediation Workflow: {{ result(\"set-variables\").dynatrace_apps_tenant_url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\nProblem id: {{result(\"get-problem-info\").records[0]['display_id']}} {{ result(\"set-variables\").dynatrace_apps_tenant_url }}/ui/apps/dynatrace.classic.problems/problems/problemdetails;gtf=-6h;gf=all;pid={{result(\"get-problem-info\").records[0][\"event.id\"] }}\n","subject":"Auto Remediation was not Successful","executionId":"{{ execution().id }}","environmentUrl":"{{ environment().url }}"},"action":"dynatrace.email:send-email","active":true,"position":{"x":0,"y":7},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"check-if-problem-is-solved-6":"ERROR"}},"description":"Send email","predecessors":["check-if-problem-is-solved-6"]},"send-escalation-email-3":{"name":"send-escalation-email-3","input":{"cc":[],"to":["daniel.braaf@dynatrace.com"],"bcc":[],"taskId":"{{ task().id }}","content":"Auto Remediation was not Successful\nDynatrace Remediation Workflow: {{ result(\"set-variables\").dynatrace_apps_tenant_url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\nProblem id: {{result(\"get-problem-info\").records[0]['display_id']}} {{ result(\"set-variables\").dynatrace_apps_tenant_url }}/ui/apps/dynatrace.classic.problems/problems/problemdetails;gtf=-6h;gf=all;pid={{result(\"get-problem-info\").records[0][\"event.id\"] }}\n","subject":"","executionId":"{{ execution().id }}","environmentUrl":"{{ environment().url }}"},"action":"dynatrace.email:send-email","active":true,"position":{"x":3,"y":5},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").resizeinstance == true }}","states":{"check-if-problem-is-solved-7":"ERROR"}},"description":"Send email","predecessors":["check-if-problem-is-solved-7"]},"check-for-recent-remediation":{"name":"check-for-recent-remediation","input":{"script":"// optional import of sdk modules\nimport { execution } from '@dynatrace-sdk/automation-utils';\nimport { queryExecutionClient } from '@dynatrace-sdk/client-query';\n\nexport default async function ({ executionId }) {\n  // your code goes here\n  const { input } = await fetch(`/platform/automation/v1/executions/${executionId}`).then((res) => res.json());\n\n  const res = await queryExecutionClient.queryExecute({\n    body: { query: 'fetch events, from: now()-10m  | filter event.type==\"CUSTOM_INFO\" | filter matchesPhrase(event.name, \"Remediation - ('+input.display_id+') killing process\") | summarize count = count()',\n\n    requestTimeoutMilliseconds: 45 * 1000 },\n  });\n\n\n  let count = res.result.records[0].count;\n  let killprocess = true;\n  let restart_instance = false;\n  let resizeinstance = false;\n  if (count > 0) {\n  killprocess = false; \n  restart_instance = true;\n  resizeinstance = false;\n  //restart_instance = true;\n  //resizeinstance = false;\n  }\n\n  const res1 = await queryExecutionClient.queryExecute({\n    body: { query: 'fetch events, from: now()-10m  | filter event.type==\"CUSTOM_INFO\" | filter matchesPhrase(event.name, \"Remediation - ('+input.display_id+') restarting\") | summarize count = count()',\n\n  requestTimeoutMilliseconds: 45 * 1000 },\n  });\n\n  let count2 = res1.result.records[0].count;\n  if (count2 > 0) {\n  killprocess = false; \n  restart_instance = false;\n  resizeinstance = true;\n\n  }\n  const res2 = await queryExecutionClient.queryExecute({\n    body: { query: 'fetch events, from: now()-10m  | filter event.type==\"CUSTOM_INFO\" | filter matchesPhrase(event.name, \"Remediation - ('+input.display_id+') resizing\") | summarize count = count()',\n\n  requestTimeoutMilliseconds: 45 * 1000 },\n  });\n\n  let count3 = res2.result.records[0].count;\n  if (count3 > 0) {\n  let killprocess = true;\n  let restart_instance = false;\n  let resizeinstance = false;\n  }\n\n  return { \"killprocess\": killprocess,\n          \"restartinstance\": restart_instance,\n          \"resizeinstance\": resizeinstance\n         };\n}"},"action":"dynatrace.automations:run-javascript","position":{"x":0,"y":1},"description":"Run custom JavaScript code.","predecessors":[]},"check-if-problem-is-solved-1":{"name":"check-if-problem-is-solved-1","input":{"workflowId":"d31cdf5e-f1ca-4583-a850-67af54e3dde7","workflowInput":"{\"dynatrace_problem_display_id\": \"{{input()[\"display_id\"] }}\"}"},"retry":{"count":20,"delay":60,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"timeout":90000,"position":{"x":-2,"y":4},"conditions":{"else":"STOP","custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"kill-process-on-ec2-instance":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":720,"predecessors":["kill-process-on-ec2-instance"]},"check-if-problem-is-solved-2":{"name":"check-if-problem-is-solved-2","input":{"workflowId":"d31cdf5e-f1ca-4583-a850-67af54e3dde7","workflowInput":"{\"dynatrace_problem_display_id\": \"{{input()[\"display_id\"] }}\"}"},"retry":{"count":20,"delay":60,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"timeout":90000,"position":{"x":-2,"y":6},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"reboot-ec2-instance":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":720,"predecessors":["reboot-ec2-instance"]},"check-if-problem-is-solved-4":{"name":"check-if-problem-is-solved-4","input":{"workflowId":"d31cdf5e-f1ca-4583-a850-67af54e3dde7","workflowInput":"{\"dynatrace_problem_display_id\": \"{{input()[\"display_id\"] }}\"}"},"retry":{"count":20,"delay":60,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"timeout":90000,"position":{"x":-2,"y":8},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"resize-ec2-instance":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":720,"predecessors":["resize-ec2-instance"]},"check-if-problem-is-solved-5":{"name":"check-if-problem-is-solved-5","input":{"workflowId":"d31cdf5e-f1ca-4583-a850-67af54e3dde7","workflowInput":"{\"dynatrace_problem_display_id\": \"{{input()[\"display_id\"] }}\"}"},"retry":{"count":20,"delay":60,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"timeout":90000,"position":{"x":0,"y":4},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"reboot-ec2-instance-2":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":720,"predecessors":["reboot-ec2-instance-2"]},"check-if-problem-is-solved-6":{"name":"check-if-problem-is-solved-6","input":{"workflowId":"d31cdf5e-f1ca-4583-a850-67af54e3dde7","workflowInput":"{\"dynatrace_problem_display_id\": \"{{input()[\"display_id\"] }}\"}"},"retry":{"count":20,"delay":30,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"timeout":90000,"position":{"x":0,"y":6},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"resize-ec2-instance-2":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":720,"predecessors":["resize-ec2-instance-2"]},"check-if-problem-is-solved-7":{"name":"check-if-problem-is-solved-7","input":{"workflowId":"d31cdf5e-f1ca-4583-a850-67af54e3dde7","workflowInput":"{\"dynatrace_problem_display_id\": \"{{input()[\"display_id\"] }}\"}"},"retry":{"count":20,"delay":60,"failedLoopIterationsOnly":true},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":3,"y":4},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").resizeinstance == true }}","states":{"resize-ec2-instance-3":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":720,"predecessors":["resize-ec2-instance-3"]},"kill-process-on-ec2-instance":{"name":"kill-process-on-ec2-instance","input":{"workflowId":"57fa7bc0-b0ee-406d-b231-b16fe35e4c79","workflowInput":"{\n\"commands\":[\"sudo pkill {{input()[\"process_name\"]}} || true\"], \n\"awsregion\":\"{{input()[\"aws_region_name\"] }}\",\n\"instanceid\":\"{{input()[\"instance_id\"] }}\",\n\"executionTimeout\":\"172800\",\n\"workingDirectory\":\"/home/ubuntu\",\n\"dynatraceawsconnection\":\"{{input()[\"dynatraceawsconnection\"] }}\"\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":-2,"y":3},"conditions":{"else":"STOP","custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"calculate-size":"OK"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["calculate-size"]},"ingest-remediation-event-kill-process":{"name":"ingest-remediation-event-kill-process","input":{"workflowId":"74a063e4-576a-4955-b477-1c531bcf7ad1","workflowInput":"{\n  \"title\": \"Remediation - ({{input()[\"display_id\"] }} {{ input()[\"event_name\"] }}) killing process {{input()[\"process_name\"] }} on host {{input()[\"process_host_name\"] }}\",\n  \"entitySelector\": \"entityId(\\\"{{input()[\"process_host_entity_id\"]}}\\\")\",\n  \"properties\": {\n    \"remediation_step\": \"kill process\",\n    \"remediation_host_name\": \"{{input()[\"process_host_name\"]}}\",\n    \"remediation_entity_name\": \"{{input()[\"process_name\"] }}\",\n    \"workflow\":\"{{ environment().url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\"\n  }\n}"},"action":"dynatrace.automations:run-workflow","position":{"x":-3,"y":4},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"kill-process-on-ec2-instance":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":10,"predecessors":["kill-process-on-ec2-instance"]},"ingest-remediation-event-restart-server":{"name":"ingest-remediation-event-restart-server","input":{"workflowId":"74a063e4-576a-4955-b477-1c531bcf7ad1","workflowInput":"{\n  \"title\": \"Remediation - ({{input()[\"display_id\"] }} {{ input()[\"event_name\"] }}) restarting host {{input()[\"process_host_name\"] }}\",\n  \"entitySelector\": \"entityId(\\\"{{input()[\"process_host_entity_id\"]}}\\\")\",\n  \"properties\": {\n    \"remediation_step\": \"restart\",\n    \"remediation_host_name\": \"{{input()[\"process_host_name\"]}}\",\n    \"remediation_entity_name\": \"{{input()[\"process_name\"] }}\",\n    \"workflow\":\"{{ environment().url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\"\n  }\n}"},"action":"dynatrace.automations:run-workflow","position":{"x":-3,"y":6},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"reboot-ec2-instance":"OK"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["reboot-ec2-instance"]},"ingest-remediation-event-restart-server-2":{"name":"ingest-remediation-event-restart-server-2","input":{"workflowId":"74a063e4-576a-4955-b477-1c531bcf7ad1","workflowInput":"{\n  \"title\": \"Remediation - ({{input()[\"display_id\"] }}) restarting host {{input()[\"process_host_name\"] }}\",\n  \"entitySelector\": \"entityId(\\\"{{input()[\"process_host_entity_id\"]}}\\\")\",\n  \"properties\": {\n    \"remediation_step\": \"restart\",\n    \"remediation_host_name\": \"{{input()[\"process_host_name\"]}}\",\n    \"remediation_entity_name\": \"{{input()[\"process_name\"] }}\",\n    \"workflow\":\"{{ environment().url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\"\n  }\n}"},"action":"dynatrace.automations:run-workflow","position":{"x":1,"y":4},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"reboot-ec2-instance-2":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":120,"predecessors":["reboot-ec2-instance-2"]},"ingest-remediation-event-restart-server-3":{"name":"ingest-remediation-event-restart-server-3","input":{"workflowId":"74a063e4-576a-4955-b477-1c531bcf7ad1","workflowInput":"{\n  \"title\": \"Remediation - ({{input()[\"display_id\"] }}) resizing host {{input()[\"process_host_name\"] }} to {{result(\"calculate-size\").future_instancetype }}\",\n  \"entitySelector\": \"entityId(\\\"{{input()[\"process_host_entity_id\"]}}\\\")\",\n  \"properties\": {\n    \"remediation_step\": \"resize\",\n    \"remediation_host_name\": \"{{input()[\"process_host_name\"]}}\",\n    \"remediation_entity_name\": \"{{input()[\"process_name\"] }}\",\n    \"workflow\":\"{{ environment().url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\"\n  }\n}"},"action":"dynatrace.automations:run-workflow","position":{"x":4,"y":4},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").resizeinstance == true }}","states":{"resize-ec2-instance-3":"OK"}},"description":"Modularize your workflows, run any existing workflow.","waitBefore":120,"predecessors":["resize-ec2-instance-3"]},"ingest-remediation-event-resize-ec2-instance":{"name":"ingest-remediation-event-resize-ec2-instance","input":{"workflowId":"74a063e4-576a-4955-b477-1c531bcf7ad1","workflowInput":"{\n  \"title\": \"Remediation - ({{input()[\"display_id\"] }} {{ input()[\"event_name\"] }}) resizing host {{input()[\"process_host_name\"] }} to {{result(\"calculate-size\").future_instancetype }}\",\n  \"entitySelector\": \"entityId(\\\"{{input()[\"process_host_entity_id\"]}}\\\")\",\n  \"properties\": {\n    \"remediation_step\": \"resize\",\n    \"remediation_host_name\": \"{{input()[\"process_host_name\"]}}\",\n    \"remediation_entity_name\": \"{{input()[\"process_name\"] }}\",\n    \"workflow\":\"{{ environment().url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\"\n  }\n}"},"action":"dynatrace.automations:run-workflow","active":true,"position":{"x":-3,"y":8},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").killprocess == true }}","states":{"resize-ec2-instance":"OK"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["resize-ec2-instance"]},"ingest-remediation-event-resize-ec2-instance-2":{"name":"ingest-remediation-event-resize-ec2-instance-2","input":{"workflowId":"74a063e4-576a-4955-b477-1c531bcf7ad1","workflowInput":"{\n  \"title\": \"Remediation - ({{input()[\"display_id\"] }}) resizing host {{input()[\"process_host_name\"] }} to {{result(\"calculate-size\").future_instancetype }}\",\n  \"entitySelector\": \"entityId(\\\"{{input()[\"process_host_entity_id\"]}}\\\")\",\n  \"properties\": {\n    \"remediation_step\": \"resize\",\n    \"remediation_host_name\": \"{{input()[\"process_host_name\"]}}\",\n    \"remediation_entity_name\": \"{{input()[\"process_name\"] }}\",\n    \"workflow\":\"{{ environment().url }}/ui/apps/dynatrace.automations/executions/{{ execution().id }}\"\n  }\n}"},"action":"dynatrace.automations:run-workflow","position":{"x":1,"y":6},"conditions":{"custom":"{{ result(\"check-for-recent-remediation\").restartinstance == true }}","states":{"resize-ec2-instance-2":"OK"}},"description":"Modularize your workflows, run any existing workflow.","predecessors":["resize-ec2-instance-2"]}}}